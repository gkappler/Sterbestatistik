<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/Sterbestatistik/libs/highlight/github.min.css"> <link rel=stylesheet  href="/Sterbestatistik/css/franklin.css"> <link rel=stylesheet  href="/Sterbestatistik/css/latex.css"> <link href="/Sterbestatistik/css/vela.css" rel=stylesheet > <script src="/Sterbestatistik/libs/vela/jquery.min.js"></script> <link rel=icon  href="/Sterbestatistik/assets/favicon.png"> <title>2020 Excess Mortality in Germany?</title> <div class=main-nav  id=menu > <div class=flex-container > <span class=sidebar-brand > <h3 style='font-size: 25px'>Mortalities 2020</h3> </span> </div> <nav class=sidebar-nav > <ul class=metismenu  id=metismenu  > <li><a href="/Sterbestatistik/">Introduction</a> <li><a href="" class=has-arrow >Methods</a> <ul> <li><a href="/Sterbestatistik/dataprep/">Data</a> <li><a href="/Sterbestatistik/population/">Population</a> </ul> <li><a href="" class=has-arrow >Results</a> <ul> <li><a href="/Sterbestatistik/averageeffects_months/">Monthly</a> <li><a href="/Sterbestatistik/averageeffects/">Weekly</a> </ul> <li><a href="/Sterbestatistik/reflection/">Discussion</a> </ul> </nav> </div> <main id=panel > <div class="toggle-button hamburger hamburger--spin" style="position: fixed;z-index: 100;"> <div class=hamburger-box > <div class=hamburger-inner ></div> </div> </div> <h1 class="page title">Data preparation</h1> <hr> <div class=franklin-content > <div class=franklin-toc ><ol><li><a href="#a_tutorial_for_scientific_data_preparation_with_julia">A tutorial for <em>Scientific Data Preparation</em> with julia.</a><li><a href="#sources">Sources</a><ol><li><a href="#population_statistics_pyramid">Population statistics &#40;pyramid&#41;</a><li><a href="#mortality_statistics">Mortality statistics</a></ol></ol></div> <h2 id=a_tutorial_for_scientific_data_preparation_with_julia ><a href="#a_tutorial_for_scientific_data_preparation_with_julia" class=header-anchor >A tutorial for <em>Scientific Data Preparation</em> with julia.</a></h2> <p>Values need to be looked up for combinations of the following variables &#40;and calendar week or month&#41;: <pre><code class="julia hljs">jahre = <span class=hljs-number >2016</span>:<span class=hljs-number >2020</span>
geschlechter = [<span class=hljs-string >&quot;Männlich&quot;</span>, <span class=hljs-string >&quot;Weiblich&quot;</span>] <span class=hljs-comment ># , &quot;Insgesamt&quot;</span>
MAX=<span class=hljs-number >200</span>
altersgruppen_kw = [ <span class=hljs-number >0</span>:<span class=hljs-number >30</span>, [a:a+<span class=hljs-number >5</span> <span class=hljs-keyword >for</span> a <span class=hljs-keyword >in</span> <span class=hljs-number >30</span>:<span class=hljs-number >5</span>:<span class=hljs-number >80</span>]..., <span class=hljs-number >85</span>:MAX ];
altersgruppen_months = [ <span class=hljs-number >0</span>:<span class=hljs-number >15</span>, <span class=hljs-number >15</span>:<span class=hljs-number >30</span>, [a:a+<span class=hljs-number >5</span> <span class=hljs-keyword >for</span> a <span class=hljs-keyword >in</span> <span class=hljs-number >30</span>:<span class=hljs-number >5</span>:<span class=hljs-number >80</span>]..., <span class=hljs-number >85</span>:MAX ];
lcolors = [ <span class=hljs-string >&quot;#006298&quot;</span>, <span class=hljs-string >&quot;#A02438&quot;</span>, <span class=hljs-string >&quot;#449ADC&quot;</span>, <span class=hljs-string >&quot;#002B52&quot;</span>, <span class=hljs-string >&quot;#EC4A60&quot;</span> ]</code></pre></p> <p>The process of looking up data values needs to be formalized. Lookup needs to be expressed in terms of a programming language, here julia function calls. What julia function will be more simple?</p> <h2 id=sources ><a href="#sources" class=header-anchor >Sources</a></h2> <p>On this data prep example I express data lookup as julia keyword functions &#40;for providing value-conditions&#41;. Calling a function is convenient. Looking up values in tables is more tedious:</p> <h3 id=population_statistics_pyramid ><a href="#population_statistics_pyramid" class=header-anchor >Population statistics &#40;pyramid&#41;</a></h3> <p><strong>Goal</strong>: julia function to look up information in official data tables.</p> <pre><code class="julia hljs">population(year=<span class=hljs-number >2020</span>,
           geschlecht=<span class=hljs-string >&quot;Männlich&quot;</span>,
           alter=<span class=hljs-number >50</span>:<span class=hljs-number >60</span>)</code></pre> <p><strong>Source</strong>: <a href="https://www-genesis.destatis.de/genesis//online?operation&#61;table&amp;code&#61;12411-0006&amp;bypass&#61;true&amp;levelindex&#61;0&amp;levelid&#61;1612115589154#abreadcrumb">Statistisches Bundesamt, Tabelle 12411-0006</a></p> <p>The population statistics is a single comma separated values file, not simple, with some header information, and footer. The age groups here are by year, with aggregation above 85.</p> <p>The comma separated values &#40;CSV&#41; file is loaded, trimmed and parsed straight forwardly in <a href="https://github.com/gkappler/Sterbestatistik/blob/main/_assets/scripts/population.jl">population.jl</a>. The aggregation with <code>UnitRange</code> is convenient but can be further improved.</p> <p>CAVEAT:</p> <ul> <li><p>Alternative Data &#40;not used&#41;: <a href="https://service.destatis.de/bevoelkerungspyramide/index.html#&#33;y&#61;2018&amp;v&#61;2">Pyramid</a></p> <li><p><a href="https://www.destatis.de/DE/Themen/Gesellschaft-Umwelt/Bevoelkerung/Sterbefaelle-Lebenserwartung/Podcast/podcast-sterbefaelle.html">Podcast</a></p> </ul> <h3 id=mortality_statistics ><a href="#mortality_statistics" class=header-anchor >Mortality statistics</a></h3> <p><strong>Goal</strong>: julia function to look up information in official data tables.</p> <pre><code class="julia hljs">deaths(year=<span class=hljs-number >2020</span>, cw=<span class=hljs-number >1</span>,
       geschlecht=<span class=hljs-string >&quot;Männlich&quot;</span>,
       alter=<span class=hljs-number >50</span>:<span class=hljs-number >60</span>)</code></pre> <p><strong>Source</strong>: <a href="https://www.destatis.de/DE/Themen/Gesellschaft-Umwelt/Bevoelkerung/Sterbefaelle-Lebenserwartung/Tabellen/sonderauswertung-sterbefaelle.html">statistisches Bundesamt, &quot;Sterbefaelle-Lebenserwartung&quot;</a> &#40;Download <a href="https://www.destatis.de/DE/Themen/Gesellschaft-Umwelt/Bevoelkerung/Sterbefaelle-Lebenserwartung/Tabellen/sonderauswertung-sterbefaelle.xlsx?__blob&#61;publicationFile">xlsx</a>&#41;,</p> <p>The death count data is an <strong>excel</strong> file with many tabs, the gender needs to be looked up by tab in the right one with data by calendar week. The age groups are 0-30, then in 5-year groups, then more than 95.</p> <p>A human I can lookup conveniently in the excel tables But formalizing julia lookup from excel is funny. in <a href="https://github.com/gkappler/Sterbestatistik/blob/main/_assets/scripts/deaths.jl">deaths.jl</a>.</p> <p>I am sure there is a better way to do this.</p> <p>Example tuple for testing:</p> <pre><code class="julia hljs">altersgruppen = altersgruppen_months

f(;kw=<span class=hljs-literal >missing</span>, args...) = (N=population(; args...), D=deaths(; kw=kw,args...))

<span class=hljs-meta >@show</span> f(alter=<span class=hljs-number >0</span>:<span class=hljs-number >30</span>, geschlecht=<span class=hljs-string >&quot;Männlich&quot;</span>, jahr=<span class=hljs-number >2020</span>, kw=<span class=hljs-number >1</span>)
<span class=hljs-meta >@show</span> f(alter=<span class=hljs-number >30</span>:<span class=hljs-number >35</span>, geschlecht=<span class=hljs-string >&quot;Männlich&quot;</span>, jahr=<span class=hljs-number >2020</span>)</code></pre> <pre><code class="plaintext hljs">f(alter = 0:30, geschlecht = &quot;Männlich&quot;, jahr = 2020, kw = 1) = (N = 12943028, D = 84)
f(alter = 30:35, geschlecht = &quot;Männlich&quot;, jahr = 2020) = (N = 2830265, D = 1798)
</code></pre> <p><a href="/Sterbestatistik/averageeffects_months/">Read the results, or continue reading the details of data preparation:</a></p> <div class=page-foot > <div class=copyright > &copy; Dr. Gregor Kappler. Last modified: March 04, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </main> <script src="/Sterbestatistik/libs/vela/metisMenu.min.js"></script> <script src="/Sterbestatistik/libs/vela/slideout.min.js"></script>