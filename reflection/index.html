<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/Sterbestatistik/libs/highlight/github.min.css"> <link rel=stylesheet  href="/Sterbestatistik/css/franklin.css"> <link rel=stylesheet  href="/Sterbestatistik/css/adjust.css"> <link rel=stylesheet  href="/Sterbestatistik/css/latex.css"> <link href="/Sterbestatistik/css/vela.css" rel=stylesheet > <script src="/Sterbestatistik/libs/vela/jquery.min.js"></script> <link rel=icon  href="/Sterbestatistik/assets/favicon.png"> <title>Franklin Example | Vela</title> <div class=main-nav  id=menu > <div class=flex-container > <span class=sidebar-brand > <h3 style='font-size: 25px'>Mortalities 2020</h3> </span> </div> <nav class=sidebar-nav > <ul class=metismenu  id=metismenu  > <li><a href="/Sterbestatistik/">Introduction</a> <li><a href="/Sterbestatistik/dataprep/">Methods</a> <li><a href="" class=has-arrow >Results</a> <ul> <li><a href="/Sterbestatistik/population/">Population</a> <li><a href="/Sterbestatistik/averageeffects_months/">Monthly</a> <li><a href="/Sterbestatistik/averageeffects/">Weekly</a> </ul> <li><a href="/Sterbestatistik/reflection/">Discussion</a> </ul> </nav> </div> <main id=panel > <div class="toggle-button hamburger hamburger--spin" style="position: fixed;z-index: 100;"> <div class=hamburger-box > <div class=hamburger-inner ></div> </div> </div> <h1 class="page title">Decentral data preparation with julia?</h1> <hr> <div class=franklin-content ><h1 id=discussion ><a href="#discussion" class=header-anchor >Discussion</a></h1> <div class=franklin-toc ><ol><li><a href="#tools">Tools</a><ol><li><a href="#how_was_julia_language_for_data_preparation">How was julia language for data preparation?</a><ol><li><a href="#range_aggregation">Range Aggregation?</a></ol><li><a href="#franklin">Franklin</a><ol><li><a href="#markdown">Markdown</a></ol></ol><li><a href="#was_data_accessible_robustly_for_reproducible_research">Was data accessible robustly for reproducible research? </a><ol><li><a href="#public_data_of_the_a_hrefhttpswww-genesisdestatisdegenesisonlinegerman_statistisches_bundesamt">public data of the <a href="https://www-genesis.destatis.de/genesis/online">German Statistisches Bundesamt</a>: </a><li><a href="#google_forms">google forms</a></ol><li><a href="#was_data_preparation_painful">Was Data Preparation Painful?</a><ol><li><a href="#cant_we_organize_data_prep_of_such_data_dezentrally">Can&#39;t we organize data prep of such data dezentrally?</a><ol><li><a href="#information_mycelium">Information Mycelium</a></ol></ol><li><a href="#next_steps">Next steps</a></ol></div> <h2 id=tools ><a href="#tools" class=header-anchor >Tools</a></h2> <h3 id=how_was_julia_language_for_data_preparation ><a href="#how_was_julia_language_for_data_preparation" class=header-anchor >How was julia language for data preparation?</a></h3> <p>Most actual data prep I did in <code>R</code> in the past. So I compare this experience with <code>julia</code> &#40;which I appreciate mainly as a programming language&#41;.</p> <p>Clearly <code>julia</code> functions have been much simpler to write because R forces you to think in vectorized data, while julia simply removes that extra thought. That makes writing and reading and understanding clearer. Of course, again, just a wonderful experience of expressing myself to the machine.</p> <p>Yet, assertions &#40;boundary checks&#41; and age interval aggregation are prototyped, and could use a bit more rigor.</p> <h4 id=range_aggregation ><a href="#range_aggregation" class=header-anchor >Range Aggregation?</a></h4> <p>I wonder, how to most generally solve a best estimate &#40;possibly distribution&#41; for the counts in any range of years <code>olderthan:youngerthan</code>, based off the different age range data specifications &#40;yearly and 5-yearly&#41;.</p> <ul> <li><p>population pyramid data &#40;0:1:95, 95:MAX&#41;</p> <li><p>mortalities data &#40;0:25, 25:5:85, 85:MAX&#41;</p> </ul> <p>If you have an idea, I am curious to read it&#33; I will think a bit about it when I am forced to confront such problem again.</p> <h3 id=franklin ><a href="#franklin" class=header-anchor >Franklin</a></h3> <p>I liked literal programming in <a href="https://franklinjl.org/code/">Franklin</a> and Firefox &#40;quick iterations of editing/reviewing thanks to live updates without reloading&#41;. Franklin is great for writing up &#40;and then publish&#41; analyses in julia. The <a href="https://tlienart.github.io/FranklinTemplates.jl/">templates</a> are nice &#40;Tufte style, too&#33;&#41;.</p> <h4 id=markdown ><a href="#markdown" class=header-anchor >Markdown</a></h4> <p>However, Markdown does not feel very natural to me. With markdown, I cannot execute code in my emacs editor. &#40;Like with org&#41;. I would so much prefer writing org&#33; So next will be to print julia <a href="https://github.com/gkappler/Tries.jl"><code>Trie</code></a><code>&#123;Int,</code><a href="https://github.com/gkappler/OrgParser"><code>OrgEntry</code></a><code>&#125;</code> to some Franklin markdown.</p> <h2 id=was_data_accessible_robustly_for_reproducible_research ><a href="#was_data_accessible_robustly_for_reproducible_research" class=header-anchor >Was data accessible robustly for reproducible research? </a></h2> <p>My impression from this exploration with </p> <h3 id=public_data_of_the_a_hrefhttpswww-genesisdestatisdegenesisonlinegerman_statistisches_bundesamt ><a href="#public_data_of_the_a_hrefhttpswww-genesisdestatisdegenesisonlinegerman_statistisches_bundesamt" class=header-anchor >public data of the <a href="https://www-genesis.destatis.de/genesis/online">German Statistisches Bundesamt</a>: </a></h3> <p>The population was a CSV file with that can robustly be used in science with general tools &#40;removing some custom shinannigan header and footer&#41;. The weekly mortalities have been a &quot;Sonderauswertung&quot;, an XLSX file with human reader audience. Mimicking human lookup is data sudoku, and is bug-prone. <strong>There is space for data publishing improvement.</strong></p> <p>There also is an API for data query from the Bundesamt. The API was not used because the interface definition manual is a very comprehensive read. For two specific dataset it was more effective to </p> <ol> <li><p>manually download data table files, </p> <li><p>parse them with standard <code>XLSX</code>, <code>CSV</code> packages, and </p> <li><p>wire the lookup in functions.</p> </ol> <p>It would be a nice grant project to write a julia package to make the remote data available by julia function calls like in <a href="/Sterbestatistik/reflection/#information_mycelium">InformationMycelium.jl</a>.</p> <h3 id=google_forms ><a href="#google_forms" class=header-anchor >google forms</a></h3> <p>Creating google forms is easy and nice and fast. This data will be available as google spreadsheet. These still need to be included in the Franklin julia scripts.</p> <p><strong>What other options are there?</strong> A questionaire, even if complicated, is a simple &#91;finite state machine&#93;&#40;https://en.wikipedia.org/wiki/Finite-state_machine&#93;. Using the OrGitBot state machine you can create fancy easy forms with the Telegram messenger. Release will be soon&#33;</p> <h2 id=was_data_preparation_painful ><a href="#was_data_preparation_painful" class=header-anchor >Was Data Preparation Painful?</a></h2> <p>This data preparation felt like solving data sudoku. Sometimes like catching fleas. With the XLSX I got impatient and wondered: am I wasting time with a task that the devil prepared to catch my life?</p> <p>This important official data should not be painful to use&#33; To not waste life, I wonder, how it should be... Painful only for one person once &#40;Instead of me <em>and</em> also all else who use this data&#33; Aren&#39;t all data analysts fed up with the data pain in 2020?&#41;</p> <h3 id=cant_we_organize_data_prep_of_such_data_dezentrally ><a href="#cant_we_organize_data_prep_of_such_data_dezentrally" class=header-anchor >Can&#39;t we organize data prep of such data dezentrally?</a></h3> <p>How we share data, analyses, results, and thoughts online is the crucial question of the digital age. The current answers are mostly tormenting for me. I get used to services. I love my linux machines and the servers I run independently. How we can simplify and clarify information sharing keeps me up at night.</p> <h4 id=information_mycelium ><a href="#information_mycelium" class=header-anchor >Information Mycelium</a></h4> <p>I task myself with the <code>InformationMycelium</code> package</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> InformationMycelium
<span class=hljs-meta >@mycelium</span> github.com/gkappler/Sterbestatistik

deaths(country=:de, year=<span class=hljs-number >2020</span>, cw=<span class=hljs-number >1</span>,
       gender=:male,
	   age=<span class=hljs-number >50</span>:<span class=hljs-number >60</span>)
	   
population(year=<span class=hljs-number >2020</span>,
           gender=:diverse, <span class=hljs-comment ># or whatever</span>
           age=<span class=hljs-number >50</span>:<span class=hljs-number >60</span>)</code></pre> <p>And then have the functions <code>population</code>, <code>deaths</code>, ... loaded into Main module by macro <code>mycelium</code>.</p> <p>I would be interested to hear your ideas and opinion on</p> <ul> <li><p>keyword functions &#40;lazy computations&#41;?</p> <li><p><code>Tables</code> interface &#40;sql-like selections&#41;?</p> </ul> <ul> <li><p>data standards &#40;parsers&#41; and</p> <li><p>functional mechanics</p> </ul> <h2 id=next_steps ><a href="#next_steps" class=header-anchor >Next steps</a></h2> <p>Data preparation never feels perfect. Always keeps hurting a bit. A next steps list helps &#40;to avoid the addiction of perfect&#41;:</p> <ul> <li><p>assert correct conditioning value</p> <li><p><code>geschlecht</code>: internationalize, Symbol?</p> <li><p>all variables english?</p> </ul> <p>Let me know what you find most important, please.</p> <div class=page-foot > <div class=copyright > &copy; Dr. Gregor Kappler. Last modified: February 19, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </main> <script src="/Sterbestatistik/libs/vela/metisMenu.min.js"></script> <script src="/Sterbestatistik/libs/vela/slideout.min.js"></script>