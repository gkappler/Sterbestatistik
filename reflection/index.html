<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/Sterbestatistik/libs/highlight/github.min.css"> <link rel=stylesheet  href="/Sterbestatistik/css/franklin.css"> <link rel=stylesheet  href="/Sterbestatistik/css/latex.css"> <link href="/Sterbestatistik/css/vela.css" rel=stylesheet > <script src="/Sterbestatistik/libs/vela/jquery.min.js"></script> <link rel=icon  href="/Sterbestatistik/assets/favicon.png"> <title>2020 Excess Mortality in Germany?</title> <div class=main-nav  id=menu > <div class=flex-container > <span class=sidebar-brand > <h3 style='font-size: 25px'>Mortalities 2020</h3> </span> </div> <nav class=sidebar-nav > <ul class=metismenu  id=metismenu  > <li><a href="/Sterbestatistik/">Introduction</a> <li><a href="" class=has-arrow >Methods</a> <ul> <li><a href="/Sterbestatistik/dataprep/">Data</a> <li><a href="/Sterbestatistik/population/">Population</a> </ul> <li><a href="" class=has-arrow >Results</a> <ul> <li><a href="/Sterbestatistik/averageeffects_months/">Monthly</a> <li><a href="/Sterbestatistik/averageeffects/">Weekly</a> </ul> <li><a href="/Sterbestatistik/reflection/">Discussion</a> </ul> </nav> </div> <main id=panel > <div class="toggle-button hamburger hamburger--spin" style="position: fixed;z-index: 100;"> <div class=hamburger-box > <div class=hamburger-inner ></div> </div> </div> <h1 class="page title">Decentral data preparation with julia?</h1> <hr> <div class=franklin-content ><h1 id=discussion ><a href="#discussion" class=header-anchor >Discussion</a></h1> <p>This page&#39;s <a href="https://github.com/gkappler/Sterbestatistik">repository</a> details code how to prepare data from CSV and XLSX files in julia for statistical analyses, and performes adjusting mortality for age and gender in the framework of conditional and average &#40;causal&#41; effects.</p> <div class=franklin-toc ><ol><li><a href="#how_accessible_was_the_open_data">How accessible was the open data?</a><ol><li><a href="#a_hrefhttpswww-genesisdestatisdegenesisonlinegerman_statistisches_bundesamt"><a href="https://www-genesis.destatis.de/genesis/online">German Statistisches Bundesamt</a>:</a><li><a href="#google_forms">Google Forms</a></ol><li><a href="#how_was_julia_language_for_data_preparation">How was <code>julia</code> language for data preparation?</a><ol><li><a href="#franklin_markdown">Franklin Markdown</a></ol><li><a href="#was_data_preparation_painful">Was Data Preparation Painful?</a><ol><li><a href="#range_aggregation">Range Aggregation?</a></ol><li><a href="#can_we_distribute_data_preparation_dezentrally">Can we distribute data preparation dezentrally?</a><ol><li><a href="#information_mycelium">Information Mycelium</a></ol><li><a href="#next_steps">Next steps</a></ol></div> <h2 id=how_accessible_was_the_open_data ><a href="#how_accessible_was_the_open_data" class=header-anchor >How accessible was the open data?</a></h2> <p>My impression from this exploration with public data of the</p> <h3 id=a_hrefhttpswww-genesisdestatisdegenesisonlinegerman_statistisches_bundesamt ><a href="#a_hrefhttpswww-genesisdestatisdegenesisonlinegerman_statistisches_bundesamt" class=header-anchor ><a href="https://www-genesis.destatis.de/genesis/online">German Statistisches Bundesamt</a>:</a></h3> <p>Population data is a CSV file that can be used with general tools &#40;removing some custom shinannigan header and footer&#41;. The weekly mortalities have been a &quot;Sonderauswertung&quot;, an XLSX file with human reader audience. Mimicking human lookup is data sudoku, and is bug-prone. <strong>There is space for data publishing improvement.</strong></p> <p>There also is an API for data query from the Bundesamt. The API was not used because the interface definition manual is a very comprehensive read. For the two datasets used it was more effective to </p> <ol> <li><p>manually download data table files, </p> <li><p>parse them with standard <code>XLSX</code>, <code>CSV</code> packages, and </p> <li><p>wire the lookup in functions.</p> </ol> <p>It would be a nice project to write a julia package to make the remote data available by julia function calls like in <a href="/Sterbestatistik/reflection/#information_mycelium">InformationMycelium.jl</a>.</p> <p>Die Daten des statistischen Bundesamtes sind verfügbar nach Auswahl von Spalten. Es existiert auch ein API zur Abfrage der Daten des statistischen Bundesamtes. Dieses wurde hier nicht verwendet, da die Definition der Schnittstelle sehr umfangreich ist. Für spezifische Daten wie hier ist das manuelle Herunterladen und Auslesen mit Hilfsfunktionen schneller umzusetzen.</p> <h3 id=google_forms ><a href="#google_forms" class=header-anchor >Google Forms</a></h3> <p>Creating google forms for the expectation questionaire was easy and fast. This data is be available as google spreadsheet and requires to be included in the Franklin julia scripts.</p> <p><strong>What other options are there?</strong> A questionaire, even if complicated, is a simple <a href="https://en.wikipedia.org/wiki/Finite-state_machine">finite state machine</a>. Using the OrGitBot state machine you can create fancy easy forms with the Telegram messenger. Release will be soon&#33;</p> <h2 id=how_was_julia_language_for_data_preparation ><a href="#how_was_julia_language_for_data_preparation" class=header-anchor >How was <code>julia</code> language for data preparation?</a></h2> <p>Writing <code>julia</code> functions have been much simpler than doing data preparation in <code>R</code> because <code>R</code> forces you to think in vectorized data. &#40;Before I did most data prep in <code>R</code> and appreciated <code>julia</code> mainly as a programming language.&#41; <code>Julia</code> simply removes that extra layer of thought. That makes writing and reading and understanding clearer. <code>Julia</code>, again, was just a wonderful experience of expressing myself to the machine.</p> <h3 id=franklin_markdown ><a href="#franklin_markdown" class=header-anchor >Franklin Markdown</a></h3> <p>I liked literal programming in <a href="https://franklinjl.org/code/">Franklin</a> &#40;quick iterations of editing/reviewing thanks to live updates without reloading&#41;. Franklin is great for writing up &#40;and then publish&#41; analyses in julia. The <a href="https://tlienart.github.io/FranklinTemplates.jl/">templates</a> are nice, and have a Tufte style, too&#33;</p> <p>However, writing Markdown does not feel very natural to me. With markdown, I cannot execute code in my emacs editor. &#40;Like with org&#41;. I would so much prefer writing org&#33; So next will be to print julia <a href="https://github.com/gkappler/Tries.jl"><code>Trie</code></a><code>&#123;Int,</code><a href="https://github.com/gkappler/OrgParser"><code>OrgEntry</code></a><code>&#125;</code> to some Franklin markdown.</p> <h2 id=was_data_preparation_painful ><a href="#was_data_preparation_painful" class=header-anchor >Was Data Preparation Painful?</a></h2> <p>This data preparation felt like solving data sudoku. Sometimes like catching fleas. With the XLSX I got impatient and wondered: am I wasting time with a task that the devil prepared to catch my life?</p> <p>This important official data should not be painful to use&#33; To not waste life, I wonder, how it should be... Painful only for one person once &#40;Instead of me <em>and</em> also all else who use this data&#33; Aren&#39;t all data analysts fed up with the data pain in 2020?&#41;</p> <p>Currently, assertions &#40;age boundary checks&#41; and age interval aggregation are prototyped, and could use more rigor.</p> <h3 id=range_aggregation ><a href="#range_aggregation" class=header-anchor >Range Aggregation?</a></h3> <p>How can counts in any range of years <code>olderthan:youngerthan</code> estimated generally &#40;possibly with distribution&#41;, based off different age interval-width data specifications &#40;yearly and 5-yearly&#41;?</p> <ul> <li><p>population pyramid data &#40;0:1:95, 95:MAX&#41;</p> <li><p>mortalities data &#40;0:25, 25:5:85, 85:MAX&#41;</p> </ul> <p>If you have an idea, I am curious to read it&#33; I will think about it when I am forced to confront such problem again.</p> <h2 id=can_we_distribute_data_preparation_dezentrally ><a href="#can_we_distribute_data_preparation_dezentrally" class=header-anchor >Can we distribute data preparation dezentrally?</a></h2> <p>How we share data, analyses, results, and thoughts online is the crucial question of the digital age. The current answers are mostly tormenting for me. I get used to services. I love my linux machines and the servers I run independently. How we can simplify and clarify information sharing keeps me up at night.</p> <h3 id=information_mycelium ><a href="#information_mycelium" class=header-anchor >Information Mycelium</a></h3> <p>I task myself with the <code>InformationMycelium</code> package</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> InformationMycelium
<span class=hljs-meta >@mycelium</span> github.com/gkappler/Sterbestatistik

deaths(country=:de, year=<span class=hljs-number >2020</span>, cw=<span class=hljs-number >1</span>,
       gender=:male,
	   age=<span class=hljs-number >50</span>:<span class=hljs-number >60</span>)
	   
population(year=<span class=hljs-number >2020</span>,
           gender=:diverse, <span class=hljs-comment ># or whatever</span>
           age=<span class=hljs-number >50</span>:<span class=hljs-number >60</span>)</code></pre> <p>And then have the functions <code>population</code>, <code>deaths</code>, ... loaded into Main module by macro <code>mycelium</code>.</p> <p>I would be interested to hear your ideas and opinion on</p> <ul> <li><p>keyword functions &#40;lazy computations&#41;?</p> <li><p><code>Tables</code> interface &#40;sql-like selections&#41;?</p> </ul> <ul> <li><p>data standards &#40;parsers&#41; and</p> <li><p>functional mechanics</p> </ul> <h2 id=next_steps ><a href="#next_steps" class=header-anchor >Next steps</a></h2> <p>Data preparation never feels perfect. Always keeps hurting a bit. A next steps list helps &#40;to avoid the addiction of perfect&#41;:</p> <ul> <li><p>assert correct conditioning value</p> <li><p><code>geschlecht</code>: internationalize, Symbol?</p> <li><p>all variables english?</p> </ul> <p>Let me know what you find most important, please.</p> <div class=page-foot > <div class=copyright > &copy; Dr. Gregor Kappler. Last modified: March 02, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </main> <script src="/Sterbestatistik/libs/vela/metisMenu.min.js"></script> <script src="/Sterbestatistik/libs/vela/slideout.min.js"></script>