<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/Sterbestatistik/libs/katex/katex.min.css"> <link rel=stylesheet  href="/Sterbestatistik/libs/highlight/github.min.css"> <script src="/Sterbestatistik/libs/plotly/plotly.min.js"></script> <link rel=stylesheet  href="/Sterbestatistik/css/franklin.css"> <link rel=stylesheet  href="/Sterbestatistik/css/tufte.css"> <link rel=stylesheet  href="/Sterbestatistik/css/latex.css"> <link rel=stylesheet  href="/Sterbestatistik/css/adjust.css"> <link rel=icon  href="/Sterbestatistik/assets/favicon.png"> <title>Adjusted Weekly Mortality</title> <div id=layout > <div id=menu > <ul> <li><a href="/Sterbestatistik/">Mortalities</a> <li><a href="/Sterbestatistik/dataprep/">Preparation</a> <li><a href="/Sterbestatistik/population/">Population</a> <li><a href="/Sterbestatistik/averageeffects_months/">Adjusted</a> <li><a href="/Sterbestatistik/averageeffects/">Weekly</a> <li><a href="/Sterbestatistik/reflection/">Reflection</a> </ul> </div> <div id=main > <div class=franklin-content > <p>Adjusting mortalities for age and gender for an unbiased comparisons in an aging society.</p> <h1 id=german_excess_death_2020 ><a href="#german_excess_death_2020">German Excess Death 2020? </a></h1> <h3 id=adjusted_data ><a href="#adjusted_data">Adjusted data</a></h3> <p>For adjustment, age and gender specific mortality is estimated for each calendar week, from <code>population</code> as well as <code>deaths</code> data, and adjusted according to the formula above, converted to a <code>DataFrame</code> <code>moda</code> &#40;abbrev. mortality data&#41;.</p> <pre><code class="julia hljs">moda = [
    ( jahr=j, alter=a, geschlecht=g,
      month=m,
      N = population(jahr=j,alter=a,geschlecht=g),
      D = deaths(jahr=j, alter=a, geschlecht=g, month=m),
      marginalP = PAG_mean[ (a,g) ]
    )
    <span class=hljs-keyword >for</span> a <span class=hljs-keyword >in</span> altersgruppen_months, 
        m <span class=hljs-keyword >in</span> <span class=hljs-number >1</span>:<span class=hljs-number >12</span>, 
        g <span class=hljs-keyword >in</span> geschlechter,
        j <span class=hljs-keyword >in</span> jahre
    <span class=hljs-keyword >if</span> deaths(jahr=j,alter=a,geschlecht=g,month=m) <span class=hljs-keyword >isa</span> <span class=hljs-built_in >Int</span>
	] |&gt; DataFrame

<span class=hljs-comment ># Formel 3</span>
EN_sum = mean(collect(values(N_sum)))
moda[:,:Dadj] = round.(( moda.D ./ moda.N ) .* moda.marginalP * EN_sum)

moda[<span class=hljs-number >1</span>:<span class=hljs-number >2</span>,:] |&gt; println</code></pre> <pre><code class="plaintext hljs">2×8 DataFrame
 Row │ jahr   alter      geschlecht  month  N        D      marginalP  Dadj
     │ Int64  UnitRang…  String      Int64  Int64    Int64  Float64    Float64
─────┼─────────────────────────────────────────────────────────────────────────
   1 │  2016  0:15       Männlich        1  5594051    171  0.069294     175.0
   2 │  2016  15:30      Männlich        1  7386753    256  0.0878448    252.0
</code></pre> <h2 id=reproduction_of_data-visualisation_of_the_statistisches_bundesamt ><a href="#reproduction_of_data-visualisation_of_the_statistisches_bundesamt">Reproduction of Data-Visualisation of the <em>Statistisches Bundesamt</em></a></h2> <p>See also the weekly mortality from 2016-2020 <a href="/Sterbestatistik/averageeffects/#reproduction_of_data-visualisation_of_the_statistisches_bundesamt">comparison with official plotting</a>.</p> <img src="/Sterbestatistik/assets/averageeffects_months/output/deaths.svg" alt=""> <p>In an aging society the actual mortality counts are biased.</p> <img src="/Sterbestatistik/assets/averageeffects_months/output/adjusted_deaths.svg" alt=""> <p>The age- and gender-adjusted mortality counts in 2020 are generally lower because the German population has been steadily aging in recent years.</p> <h3 id=year_aggregated_mortality ><a href="#year_aggregated_mortality">Year aggregated mortality</a></h3> <p>The total count of deceased persons in the given year is computed by summing monthly mortality results, in total numbers, as well as adjusted by age and gender.</p> <img src="/Sterbestatistik/assets/averageeffects_months/output/adjusted_deaths_years.svg" alt=""> <p>When adjusted for age and gender, the year 2020 has the second lowest mortality &#40;among years 2016 to 2020&#41; in Germany.</p> <p>2020 saw &#40;how could this be computed?&#41; deaths less/more than would have been expected given average mortality rates from 2016-2020 and the joint age-gender distribution in 2020. Only the directly preceding year 2019 had even lower mortality. A fact that is notable because in 2020 no strong catch-up effect can be observed.</p> <p>Yet, comparing these numbers unadjusted &#40;<code>difference</code>&#41; again is not fair, considering the population growth from 2016 to 2020: <code>D_sum_sum</code> is the &quot;data&quot;, <code>Dadj_sum_sum</code> is the &quot;age-gender-adjusted&quot; curve above. <code>D_pop_adj</code> is the mortality adjusted to the assumption that all years had fixed population <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo stretchy=false >(</mo><mi>N</mi><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">E(N)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mclose >)</span></span></span></span> used in the adjustment formula.</p> <pre><code class="julia hljs">D_2016_2021_Tage = <span class=hljs-built_in >Dict</span>( j =&gt; d 
	<span class=hljs-keyword >for</span> (j,d) <span class=hljs-keyword >in</span> zip((<span class=hljs-number >2020</span>,<span class=hljs-number >2019</span>,<span class=hljs-number >2018</span>, <span class=hljs-number >2017</span>, <span class=hljs-number >2016</span>), 
	                 (<span class=hljs-number >982489</span>,  <span class=hljs-number >939520</span>,  <span class=hljs-number >954874</span>,  <span class=hljs-number >932263</span>,  <span class=hljs-number >910899</span>)))
expected_deaths[:,:totalxls] = 
	[ D_2016_2021_Tage[j] <span class=hljs-keyword >for</span> j <span class=hljs-keyword >in</span> expected_deaths.Jahr ]
expected_deaths[:,:Population] = 
	[ N_sum[j] <span class=hljs-keyword >for</span> j <span class=hljs-keyword >in</span> expected_deaths.Jahr ]
expected_deaths[:,:D_pop_adj] = 
	round.(EN_sum * expected_deaths.D_sum_sum ./ expected_deaths.Population )
expected_deaths[:,:difference] = 
	expected_deaths.Dadj_sum_sum .- expected_deaths.D_sum_sum
expected_deaths[:,:difference_adj] = 
	round.(expected_deaths.Dadj_sum_sum .- expected_deaths.D_pop_adj)
 
println(expected_deaths)</code></pre> <pre><code class="plaintext hljs">5×9 DataFrame
 Row │ Jahr   D_sum_sum  Dadj_sum_sum  D_sum_sum_EN  totalxls  Population  D_pop_adj  difference  difference_adj
     │ Int64  Int64      Float64       Float64       Int64     Int64       Float64    Float64     Float64
─────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────
   1 │  2016     910899      945036.0      917100.0    910899    82175684   917100.0     34137.0         27936.0
   2 │  2017     932263      947728.0      934675.0    932263    82521653   934675.0     15465.0         13053.0
   3 │  2018     954874      956343.0      954214.0    954874    82792351   954214.0      1469.0          2129.0
   4 │  2019     939520      927554.0      936305.0    939520    83019213   936305.0    -11966.0         -8751.0
   5 │  2020     982489      944528.0      977390.0    982489    83166711   977390.0    -37961.0        -32862.0
</code></pre> <h3 id=sanity_check_deaths_per_year_and_gender ><a href="#sanity_check_deaths_per_year_and_gender">Sanity check: deaths per year and gender</a></h3> <pre><code class="plaintext hljs">10×2 DataFrame
 Row │ jg                  D_sum
     │ Tuple…              Int64
─────┼────────────────────────────
   1 │ (2016, &quot;Männlich&quot;)  448304
   2 │ (2016, &quot;Weiblich&quot;)  462595
   3 │ (2017, &quot;Männlich&quot;)  457756
   4 │ (2017, &quot;Weiblich&quot;)  474507
   5 │ (2018, &quot;Männlich&quot;)  470032
   6 │ (2018, &quot;Weiblich&quot;)  484842
   7 │ (2019, &quot;Männlich&quot;)  465885
   8 │ (2019, &quot;Weiblich&quot;)  473635
   9 │ (2020, &quot;Männlich&quot;)  491380
  10 │ (2020, &quot;Weiblich&quot;)  491109
5×2 DataFrame
 Row │ jahr   D_sum
     │ Int64  Int64
─────┼───────────────
   1 │  2016  910899
   2 │  2017  932263
   3 │  2018  954874
   4 │  2019  939520
   5 │  2020  982489
</code></pre> <div class=page-foot > <div class=copyright > &copy; Dr. Gregor Kappler. Last modified: February 13, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> </div>