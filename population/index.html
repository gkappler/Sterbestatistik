<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/Sterbestatistik/libs/katex/katex.min.css"> <link rel=stylesheet  href="/Sterbestatistik/libs/highlight/github.min.css"> <script src="/Sterbestatistik/libs/plotly/plotly.min.js"></script> <link rel=stylesheet  href="/Sterbestatistik/css/franklin.css"> <link rel=stylesheet  href="/Sterbestatistik/css/tufte.css"> <link rel=stylesheet  href="/Sterbestatistik/css/latex.css"> <link rel=stylesheet  href="/Sterbestatistik/css/adjust.css"> <link rel=icon  href="/Sterbestatistik/assets/favicon.png"> <title>Population tables</title> <div id=layout > <div id=menu > <ul> <li><a href="/Sterbestatistik/">Mortalities</a> <li><a href="/Sterbestatistik/dataprep/">Preparation</a> <li><a href="/Sterbestatistik/population/">Population</a> <li><a href="/Sterbestatistik/averageeffects_months/">Adjusted</a> <li><a href="/Sterbestatistik/averageeffects/">Weekly</a> <li><a href="/Sterbestatistik/reflection/">Reflection</a> </ul> </div> <div id=main > <div class=franklin-content > <h1 id=population_in_germany_2016-2020 ><a href="#population_in_germany_2016-2020">Population in Germany 2016-2020</a></h1> <h2 id=collecting_values_in_a_table ><a href="#collecting_values_in_a_table">Collecting values in a table</a></h2> <p>The lookup functions <code>population</code> are used in a multi-dimensional julia comprehension <code>&#91;f&#40;...&#41; for ...&#93;</code> and converted to a <code>DataFrame</code> <code>poda</code> &#40;abbrev. population data&#41;.</p> <pre><code class="julia hljs">altersgruppen = altersgruppen_months</code></pre>
<p>The data is comprised of rows like for the <code>0:30</code> age group: <pre><code class="plaintext hljs">10×6 DataFrame
 Row │ alter      geschlecht  jahr   N        P          cell
     │ UnitRang…  String      Int64  Int64    Float64    Tuple…
─────┼──────────────────────────────────────────────────────────────────────
   1 │ 0:15       Männlich     2016  5594051  0.0680743  (0:15, &quot;Männlich&quot;)
   2 │ 0:15       Männlich     2017  5679300  0.0688219  (0:15, &quot;Männlich&quot;)
   3 │ 0:15       Männlich     2018  5740895  0.0693409  (0:15, &quot;Männlich&quot;)
   4 │ 0:15       Männlich     2019  5800702  0.0698718  (0:15, &quot;Männlich&quot;)
   5 │ 0:15       Männlich     2020  5851703  0.0703611  (0:15, &quot;Männlich&quot;)
   6 │ 0:15       Weiblich     2016  5287075  0.0643387  (0:15, &quot;Weiblich&quot;)
   7 │ 0:15       Weiblich     2017  5369268  0.065065   (0:15, &quot;Weiblich&quot;)
   8 │ 0:15       Weiblich     2018  5430864  0.0655962  (0:15, &quot;Weiblich&quot;)
   9 │ 0:15       Weiblich     2019  5490113  0.0661306  (0:15, &quot;Weiblich&quot;)
  10 │ 0:15       Weiblich     2020  5539556  0.0666079  (0:15, &quot;Weiblich&quot;)
</code></pre></p>

<h4 id=total_population ><a href="#total_population">Total population</a></h4>
<p>As data sanity check it is tested whether <code>poda</code> groups sum to same value as original data in CSV file.</p>
<pre><code class="julia hljs"><span class=hljs-comment ># grouped sum of raw population table for each Stichtag</span>
tmp = combine(groupby(p, :Stichtag), 
              :Insgesamt=&gt;sum)
tmp[:, :N_lookup] = [ get(N_sum, year(d)+<span class=hljs-number >1</span>, <span class=hljs-literal >missing</span>) 
                      <span class=hljs-keyword >for</span> d <span class=hljs-keyword >in</span> tmp[:,<span class=hljs-number >1</span>] ]
tmp |&gt; println</code></pre>
<p>Total population computed from two tables &#40;lookup <code>poda</code> and raw data <code>p</code>&#41; must match: <pre><code class="plaintext hljs">6×3 DataFrame
 Row │ Stichtag    Insgesamt_sum  N_lookup
     │ Date…       Int64          Int64?
─────┼─────────────────────────────────────
   1 │ 2014-12-31       81197537   missing
   2 │ 2015-12-31       82175684  82175684
   3 │ 2016-12-31       82521653  82521653
   4 │ 2017-12-31       82792351  82792351
   5 │ 2018-12-31       83019213  83019213
   6 │ 2019-12-31       83166711  83166711
</code></pre></p>
<h3 id=average_joint_age_gender_distribution_pag_mean_pa_g ><a href="#average_joint_age_gender_distribution_pag_mean_pa_g">Average joint age, gender distribution <code>PAG_mean&#61;</code> <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy=false >(</mo><mi>A</mi><mo separator=true >,</mo><mi>G</mi><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">P(A, G)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class=mopen >(</span><span class="mord mathnormal">A</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">G</span><span class=mclose >)</span></span></span></span></a></h3>
<p>This plot is only for checking errors:</p>

<img src="/Sterbestatistik/assets/population/output/Pmean.svg" alt="">
<div class=page-foot >
  <div class=copyright >
    &copy; Dr. Gregor Kappler. Last modified: February 13, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>
        </div> 
    </div>