<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/Sterbestatistik/libs/highlight/github.min.css"> <link rel=stylesheet  href="/Sterbestatistik/css/franklin.css"> <link rel=stylesheet  href="/Sterbestatistik/css/adjust.css"> <link rel=stylesheet  href="/Sterbestatistik/css/latex.css"> <link href="/Sterbestatistik/css/vela.css" rel=stylesheet > <script src="/Sterbestatistik/libs/vela/jquery.min.js"></script> <link rel=icon  href="/Sterbestatistik/assets/favicon.png"> <title>Franklin Example | Vela</title> <div class=main-nav  id=menu > <div class=flex-container > <span class=sidebar-brand > <h3 style='font-size: 25px'>Mortalities 2020</h3> </span> </div> <nav class=sidebar-nav > <ul class=metismenu  id=metismenu  > <li><a href="/Sterbestatistik/">Introduction</a> <li><a href="/Sterbestatistik/dataprep/">Methods</a> <li><a href="" class=has-arrow >Results</a> <ul> <li><a href="/Sterbestatistik/population/">Population</a> <li><a href="/Sterbestatistik/averageeffects_months/">Monthly</a> <li><a href="/Sterbestatistik/averageeffects/">Weekly</a> </ul> <li><a href="/Sterbestatistik/reflection/">Discussion</a> </ul> </nav> </div> <main id=panel > <div class="toggle-button hamburger hamburger--spin" style="position: fixed;z-index: 100;"> <div class=hamburger-box > <div class=hamburger-inner ></div> </div> </div> <h1 class="page title">Adjusted Weekly Mortality</h1> <hr> <div class=franklin-content > <h1 id=adjusting_weekly_mortalities_for_age_and_gender ><a href="#adjusting_weekly_mortalities_for_age_and_gender" class=header-anchor >Adjusting weekly mortalities for age and gender </a></h1> <p>for unbiased graphical comparisons in an aging society.</p> <h2 id=adjusted_data ><a href="#adjusted_data" class=header-anchor >Adjusted data</a></h2> <p>For adjustment, age and gender specific mortality is estimated for each calendar week, from <code>population</code> as well as <code>deaths</code> data, and adjusted according to the <a href="/Sterbestatistik/#probabilities_and_adjusted_expectations">formula</a>, converted to a <code>DataFrame</code> <code>moda</code> &#40;abbrev. mortality data&#41;.</p> <pre><code class="julia hljs">moda = [
    ( jahr=j, alter=a, geschlecht=g,
      kw=kw,
      N = population(jahr=j,alter=a,geschlecht=g),
      D = deaths(jahr=j, alter=a, geschlecht=g, kw=kw),
      marginalP = PAG_mean[ (a,g) ]
	)
    <span class=hljs-keyword >for</span> a <span class=hljs-keyword >in</span> altersgruppen, 
        kw <span class=hljs-keyword >in</span> <span class=hljs-number >1</span>:<span class=hljs-number >53</span>, 
        g <span class=hljs-keyword >in</span> geschlechter,
        j <span class=hljs-keyword >in</span> jahre
    <span class=hljs-keyword >if</span> deaths(jahr=j,alter=a,geschlecht=g,kw=kw) <span class=hljs-keyword >isa</span> <span class=hljs-built_in >Int</span>
	] |&gt; DataFrame

<span class=hljs-comment ># Formel 3</span>
EN_sum = mean(collect(values(N_sum)))
moda[:,:Dadj] = round.(( moda.D ./ moda.N ) .* moda.marginalP * EN_sum)

moda[<span class=hljs-number >1</span>:<span class=hljs-number >2</span>,:] |&gt; println</code></pre> <pre><code class="plaintext hljs">2×8 DataFrame
 Row │ jahr   alter      geschlecht  kw     N         D      marginalP  Dadj
     │ Int64  UnitRang…  String      Int64  Int64     Int64  Float64    Float64
─────┼──────────────────────────────────────────────────────────────────────────
   1 │  2016  0:30       Männlich        1  12980804     95  0.157139      95.0
   2 │  2016  30:35      Männlich        1   2647069     37  0.0330045     38.0
</code></pre> <h2 id=reproduction_of_data-visualisation_of_the_statistisches_bundesamt ><a href="#reproduction_of_data-visualisation_of_the_statistisches_bundesamt" class=header-anchor >Reproduction of Data-Visualisation of the <em>Statistisches Bundesamt</em></a></h2> <p><a href="https://www.destatis.de/DE/Themen/Querschnitt/Corona/_Grafik/_Interaktiv/woechentliche-sterbefallzahlen-jahre.html?nn&#61;209016">Official mortality analysis</a> shows a graph of weekly mortality from 2016-2020. &#40;<a href="https://www.destatis.de/DE/Themen/Gesellschaft-Umwelt/Bevoelkerung/Sterbefaelle-Lebenserwartung/sterbefallzahlen.html">Also check the more interactive visualization</a>.&#41;</p> <p>Our reproduction seems identical: <img src="/Sterbestatistik/assets/averageeffects/output/deaths.svg" alt=""></p> <p>The age- and gender-adjusted mortality counts in 2020 are low until autumn. The mortality increase in Winter 2020 is less pronounced than when looking at values biased by the confounders from an aging society.</p> <img src="/Sterbestatistik/assets/averageeffects/output/adjusted_deaths.svg" alt=""> <h3 id=year_aggregated_mortality ><a href="#year_aggregated_mortality" class=header-anchor >Year aggregated mortality</a></h3> <p>The weekly mortalities cannot be consistently summed up to year-related statistics &#40;because parts of the last week are part of the first weeks of suceeding year&#41;. The official statistics lists 53 weeks only for 2020, exaggerating the 2020 count below. <a href="/Sterbestatistik/averageeffects_months/#year_aggregated_mortality">Please see correct year aggregated statistics computed from adjusting by months.</a></p> <h3 id=sanity_check_deaths_per_year_and_gender ><a href="#sanity_check_deaths_per_year_and_gender" class=header-anchor >Sanity check: deaths per year and gender</a></h3> <pre><code class="plaintext hljs">10×2 DataFrame
 Row │ jg                  D_sum
     │ Tuple…              Int64
─────┼────────────────────────────
   1 │ (2016, &quot;Männlich&quot;)  446021
   2 │ (2016, &quot;Weiblich&quot;)  460288
   3 │ (2017, &quot;Männlich&quot;)  456316
   4 │ (2017, &quot;Weiblich&quot;)  473035
   5 │ (2018, &quot;Männlich&quot;)  468793
   6 │ (2018, &quot;Weiblich&quot;)  483502
   7 │ (2019, &quot;Männlich&quot;)  464511
   8 │ (2019, &quot;Weiblich&quot;)  472261
   9 │ (2020, &quot;Männlich&quot;)  498917
  10 │ (2020, &quot;Weiblich&quot;)  498942
5×2 DataFrame
 Row │ jahr   D_sum
     │ Int64  Int64
─────┼───────────────
   1 │  2016  906309
   2 │  2017  929351
   3 │  2018  952295
   4 │  2019  936772
   5 │  2020  997859
</code></pre> <div class=page-foot > <div class=copyright > &copy; Dr. Gregor Kappler. Last modified: February 19, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </main> <script src="/Sterbestatistik/libs/vela/metisMenu.min.js"></script> <script src="/Sterbestatistik/libs/vela/slideout.min.js"></script>